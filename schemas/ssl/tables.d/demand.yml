name: demand
description: |
 Service needs certificates

templates:
 - system.reference_service_entity

primary_key:
 - id

columns:
 - name: id
   type: uuid
   description: UUID
   default: commons._uuid()
 - name: ca_type
   type: commons.t_key
   description: Usually 'ssl'
   default: "'ssl'"
 - name: ca_system
   type: commons.t_key
   description: Usually 'acme' or 'manual'
 - name: ca_name
   type: dns.t_hostname
   description: Name of certificate authority

foreign_keys:
 - name: ssl_service
   columns:
    - ca_type
    - ca_system
    - ca_name
   ref_table: system.subservice_entity
   ref_columns:
    - service
    - subservice
    - service_entity_name

unique:
 - name: unique
   columns:
    - id
    - service
    - service_entity_name

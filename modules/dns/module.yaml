name: dns
description: DNS

domains:

 -
  name: t_domain
  description: Domain name
  type: varchar(253)
  checks:
   -
    name: check domain validity
    description: check domain validity
    check: "TRUE" # domain_name_is_valid(VALUE)

 -
  name: t_type
  description: Resource record type
  type: varchar(253)
  checks:
   - 
    name: resource type must be (MX, A, etc)
    description: check
    check: "VALUE IN ('MX', 'A', 'AAAA', 'CNAME', 'SRV')"

 -
  name: t_rdata
  description: record entry
  type: varchar

 -
  name: t_ttl
  description: ttl
  type: integer
  checks:
   -
    name: ttl range
    description: Ensure that TTL is positive and put maximum to 48h
    check: VALUE >= 0 AND VALUE <= 172800

column_templates:
 -
  template: name
  name: domain
  type: dns.t_domain
  description: Name like sub.example.org. This defines to which name the resource record pertains.
 -
  template: type
  name: type
  type: dns.t_type
  description: Type (?) like MX, A, AAAA, ...
 -
  template: rdata
  name: rdata
  type: dns.t_rdata
  description: fancy rdata storage
 -
  template: ttl
  name: ttl
  description: Time to live
  type: dns.t_ttl

table_templates:
 -
  template: reference_service
  description: Reference service
  columns:
   -
    name: domain
    type: dns.t_domain
    description: Domain name
  foreign_keys:
   -
    name: reference dns (service)
    columns:
     - domain
     - service
    ref_table: dns.service
    ref_columns:
     - domain
     - service

 -
  template: name
  description: Name
  columns:
   -
    tag: column_tpl
    template: dns.name
   -
    tag: column_tpl
    template: dns.type
